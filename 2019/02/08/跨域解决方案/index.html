<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    
    
    <title>è·¨åŸŸè§£å†³æ–¹æ¡ˆ | This is My World | If I Can Turn Back Time</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    <meta name="keywords" content="ç¬”è®°,è·¨åŸŸ">
    <link rel="shortcut icon" href="/blog/img/favicon.ico">
    <link rel="stylesheet" href="/blog/css/third-party/swipebox.min.css?v=1.3.2">
    <link rel="stylesheet" href="/blog/css/style.css?v=1.3.2">
    
    <script type="text/javascript">
        // Data Center
        var DC = {
            reward:	false,
            lv: JSON.parse('{"enable":true,"app_id":"BrLRjz6HbRLnsfSae353Cjdz-gzGzoHsz","app_key":"IoIFiLVVJk5aBNpxEGX7UO1b","icon":true}'),
            v: JSON.parse('{"enable":true,"appid":"BrLRjz6HbRLnsfSae353Cjdz-gzGzoHsz","appkey":"IoIFiLVVJk5aBNpxEGX7UOlb","notify":true,"verify":true,"placeholder":"give me some sugers plz...","avatar":"wavatar"}'),
            g: JSON.parse('{"enable":false,"lazy":true,"owner":"HanRenHui","repo":"HanRenHui.github.io","oauth":{"client_id":"aece49cfa525e062e2e0","client_secret":"a103585226e6ef123efef34b015f7250c4912f31"},"perPage":10}'),
            d: JSON.parse('{"app_id":"f7ac8962"}')
        };
    </script>
    <script type="text/javascript">
        window.lazyScripts=[];
    </script>
    
        <script type="text/javascript" src="/blog/js/plugins/daovoice.js?v=1.3.2"></script>
    
</head>


<body>
    <div id="loading" class="active"></div>

    <aside id="menu" class="hide" >
  <div class="inner flex-row-vertical">
    <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-off">
        <i class="icon icon-lg icon-close"></i>
    </a>
    <div class="brand-wrap">
      
      <img src="/blog/img/brand.jpg" class="brand-bg">
      
      <div class="brand">
        <a href="/blog/" class="avatar waves-effect waves-circle waves-light">
          <img src="/blog/img/avatar.jpg">
        </a>
        <hgroup class="introduce">
          <h5 class="nickname">éŸ“ä»è¼</h5>
          <a href="mailto:897691781@qq.com" title="897691781@qq.com" class="mail">
            
              <span>8</span>
            
              <span>9</span>
            
              <span>7</span>
            
              <span>6</span>
            
              <span>9</span>
            
              <span>1</span>
            
              <span>7</span>
            
              <span>8</span>
            
              <span>1</span>
            
              <span>@</span>
            
              <span>q</span>
            
              <span>q</span>
            
              <span>.</span>
            
              <span>c</span>
            
              <span>o</span>
            
              <span>m</span>
            
          </a>
        </hgroup>
        
        <ul class="menu-link">
          
              <li>
                <a href="https://github.com/HanRenHui" target="_blank">
                  <i class="icon icon-lg icon-github"></i>
                </a>
              </li>
            
        </ul>
        
      </div>
    </div>
    <div class="scroll-wrap flex-col">
      <ul class="nav">
        
            <li class="">
              <a href="/blog/"  >
                <i class="icon icon-lg icon-home"></i>
                HOME
              </a>
            </li>
        
            <li class="">
              <a href="/blog/categories"  >
                <i class="icon icon-lg icon-th-list"></i>
                CATEGORIES
              </a>
            </li>
        
            <li class="">
              <a href="/blog/tags"  >
                <i class="icon icon-lg icon-tags"></i>
                TAGS
              </a>
            </li>
        
            <li class="">
              <a href="/blog/archives"  >
                <i class="icon icon-lg icon-archives"></i>
                ARCHIVES
              </a>
            </li>
        
            <li class="">
              <a href="/blog/custom"  >
                <i class="icon icon-lg icon-plus-square"></i>
                CUSTOM
              </a>
            </li>
        
      </ul>
    </div>
  </div>
</aside>

    <main id="main">
        <header class="top-header" id="header">
    <div class="flex-row clearfix">
        <a href="javascript:;" class="header-icon pull-left waves-effect waves-circle waves-light on" id="menu-toggle">
          <i class="icon icon-lg icon-navicon"></i>
        </a>
        <div class="flex-col header-title ellipsis">
            <span>è·¨åŸŸè§£å†³æ–¹æ¡ˆ</span>
            
        </div>
        
        <a href="javascript:;" id="site_search_btn" class="header-icon pull-right waves-effect waves-circle waves-light">
            <i class="icon icon-lg icon-search"></i>
        </a>
        
    </div>
</header>
<header class="content-header post-header">
    <img src="/blog/img/banner.jpg" class="header-bg">
    <div class="container fade-scale">
        <h1 class="title">è·¨åŸŸè§£å†³æ–¹æ¡ˆ</h1>
        <h5 class="subtitle">
            
                <time datetime="2019-02-08T08:35:40.000Z" itemprop="datePublished" class="page-time">
  2019-02-08
</time>


	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/blog/categories/ç¬”è®°/">ç¬”è®°</a><ul class="article-category-list-child"><li class="article-category-list-item"><a class="article-category-list-link" href="/blog/categories/ç¬”è®°/è·¨åŸŸ/">è·¨åŸŸ</a></li></ul></li></ul>

            
        </h5>
        
    </div>
    

</header>

<div id="site_search">
    <div class="search-title clearfix">
        <span class="pull-left">
          <i class="icon icon-lg icon-search"></i>
        </span>
        <input type="text" id="local-search-input" name="q" results="0" placeholder="search my blog..." class="form-control pull-left"/>
        <a href="javascript:;" class="close pull-right waves-effect waves-circle waves-light">
          <i class="icon icon-lg icon-close"></i>
        </a>
    </div>
    <div id="local-search-result"></div>
</div>


<div class="container body-wrap">
    <article id="post-è·¨åŸŸè§£å†³æ–¹æ¡ˆ"
  class="post-article article-type-post" itemprop="blogPost">
    <div class="post-card">
        <h1 class="post-card-title">è·¨åŸŸè§£å†³æ–¹æ¡ˆ</h1>
        <div class="post-meta">
            <time class="post-time" title="2019-02-08 16:35:40" datetime="2019-02-08T08:35:40.000Z"  itemprop="datePublished">2019-02-08</time>

            
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/blog/categories/ç¬”è®°/">ç¬”è®°</a><ul class="article-category-list-child"><li class="article-category-list-item"><a class="article-category-list-link" href="/blog/categories/ç¬”è®°/è·¨åŸŸ/">è·¨åŸŸ</a></li></ul></li></ul>



            
	<span id="/blog/2019/02/08/è·¨åŸŸè§£å†³æ–¹æ¡ˆ/" class="leancloud_visitors" data-flag-title="è·¨åŸŸè§£å†³æ–¹æ¡ˆ" title="è·¨åŸŸè§£å†³æ–¹æ¡ˆ">
		
			<i class="icon icon-eye"></i>
		
		<span class="leancloud-visitors-count"></span>
	</span>
 

            
    <span class="leancloud-comment">
        <i class="icon icon-comment-o"></i>
        <a href="/blog/2019/02/08/è·¨åŸŸè§£å†³æ–¹æ¡ˆ/#comment">
            <span class="valine-comment-count" data-xid="/blog/2019/02/08/è·¨åŸŸè§£å†³æ–¹æ¡ˆ/"></span>
        </a>
    </span>



            
        </div>
        <div class="post-content" id="post-content" itemprop="postContent">
            
            <h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>ä¹‹å‰åœ¨é¡¹ç›®ä¸­é‡åˆ°äº†è·¨åŸŸçš„é—®é¢˜ï¼Œæ˜¨å¤©åˆšå¥½æœ‰ç©ºå°±ç³»ç»Ÿå­¦ä¹ äº†ä¸€ä¸‹ï¼Œé¡ºä¾¿åœ¨è¿™è¾¹è®°å½•ä¸€ä¸‹ã€‚</p>
<h1 id="åŒæºç­–ç•¥"><a href="#åŒæºç­–ç•¥" class="headerlink" title="åŒæºç­–ç•¥"></a>åŒæºç­–ç•¥</h1><p>æ‰€è°“åŒæºï¼ŒæŒ‡çš„æ˜¯ä¸‰ä¸ªç›¸åŒğŸ‘‡ï¼Œ åªè¦ä¸‹æ–¹çš„ä¸‰è€…æœ‰ä¸€è€…ä¸ä¸€æ ·ï¼Œå³ä¸ºè·¨åŸŸ</p>
<ul>
<li>åè®®ç›¸åŒ</li>
<li>åŸŸåç›¸åŒ</li>
<li>ç«¯å£ç›¸åŒ</li>
</ul>
<p>æ‹¿<code>http://www.hanrenhuo.cn</code>æ¥ä¸¾å‡ ä¸ªæ —å­<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">http:<span class="comment">//www.hanrenhui.cn/dir/a.html åŒæº</span></span><br><span class="line">http:<span class="comment">//www.hanrenhui.cn:50/dir2/a.html ç«¯å£ä¸åŒï¼Œä¸åŒæº</span></span><br><span class="line">https:<span class="comment">//www.hanrenhuo.cn/dir/a.html åè®®ä¸åŒ ä¸åŒæº</span></span><br><span class="line">http:<span class="comment">//hanrenhui.cn  åŸŸåä¸åŒï¼Œä¸åŒæº</span></span><br></pre></td></tr></table></figure></p>
<h1 id="è·¨åŸŸé™åˆ¶"><a href="#è·¨åŸŸé™åˆ¶" class="headerlink" title="è·¨åŸŸé™åˆ¶"></a>è·¨åŸŸé™åˆ¶</h1><p>åŒæºç­–ç•¥çš„ç›®çš„æ˜¯å‡ºäºå¯¹<strong>ç”¨æˆ·ä¿¡æ¯å®‰å…¨</strong>çš„è€ƒè™‘ï¼Œå¦‚æœä¸åŒæºåˆ™æœ‰ä»¥ä¸‹å‡ ç§é™åˆ¶ğŸ‘‡</p>
<blockquote>
<p>Cookieã€LocalStorage å’Œ IndexDB æ— æ³•è¯»å–ã€‚<br>DOM æ— æ³•è·å¾—ã€‚<br>AJAX è¯·æ±‚ä¸èƒ½å‘é€ã€‚</p>
</blockquote>
<p>ä½†æ˜¯åœ¨æ—¥å¸¸codingå½“ä¸­ï¼Œå…ä¸äº†è¦è·¨åŸŸè¯·æ±‚ä¸€äº›æ•°æ®ï¼Œ é‚£ä¹ˆæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹éƒ½æœ‰å“ªäº›è·¨åŸŸè§£å†³æ–¹æ¡ˆ</p>
<h1 id="document-domain"><a href="#document-domain" class="headerlink" title="document.domain"></a>document.domain</h1><p>å‰é¢æåˆ°ï¼Œä¸åŒæºæ—¶<code>DOMæ— æ³•è·å¾—</code>, æ¯”å¦‚çˆ¶çª—å£è¿è¡ŒğŸ‘‡ä»£ç ï¼Œæƒ³è¦è·å¾—iframeçª—å£çš„documentå¯¹è±¡ï¼Œå¦‚æœäºŒè€…ä¸åŒæºåˆ™ä¼šæŠ¥é”™<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">document</span>.getElementById(<span class="string">"myIFrame"</span>).contentWindow.document</span><br></pre></td></tr></table></figure></p>
<p>åŒæ ·çš„å­çª—å£æƒ³è¦è·å–çˆ¶çª—å£çš„ä¿¡æ¯ä¹Ÿä¼šæŠ¥é”™<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.parent.document.body</span><br></pre></td></tr></table></figure></p>
<p>å¦‚æœè¿™ä¸¤ä¸ªçª—å£ä¸€çº§åŸŸåç›¸åŒï¼ŒäºŒçº§åŸŸåä¸åŒçš„è¯,ç±»ä¼¼ <code>http://www.hanrenhui.cn</code>å’Œ<code>http://a.hanrenhui.cn</code>ï¼ŒäºŒè€…æ‹¥æœ‰å…¬å…±çš„ä¸€çº§åŸŸåä¹Ÿå°±æ˜¯<code>hanrenhui.cn</code>ï¼Œé‚£ä¹ˆåœ¨åè®®å’Œç«¯å£éƒ½ç›¸åŒçš„æƒ…å†µä¸‹ï¼Œä¸¤ä¸ªçª—å£è®¾ç½®ç›¸åŒçš„<strong>document.domain</strong>å°±å¯è·å–å¯¹æ–¹çš„domï¼Œè€Œä¸”ä¹Ÿå¯ä»¥é€šè¿‡è¿™ç§æ–¹å¼æ¥å…±äº«cookieï¼Œå®ç°äº¤æ¢æ•°æ®</p>
<h1 id="ç‰‡æ®µæ ‡è¯†ç¬¦"><a href="#ç‰‡æ®µæ ‡è¯†ç¬¦" class="headerlink" title="ç‰‡æ®µæ ‡è¯†ç¬¦"></a>ç‰‡æ®µæ ‡è¯†ç¬¦</h1><p>å…ˆäº†è§£ä¸‹ç‰‡æ®µæ ‡è¯†ç¬¦ï¼Œç‰‡æ®µæ ‡è¯†ç¬¦æŒ‡çš„æ˜¯urlä¸­<strong>#</strong>åè¾¹çš„å†…å®¹, å®ƒä»£è¡¨é¡µé¢ä¸­çš„æŸä¸ªä½ç½®ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¦‚ä½•åˆ©ç”¨å®ƒæ¥å®Œæˆè·¨åŸŸé€šä¿¡å‘¢ï¼Œçœ‹ä¸‹é¢<br>çˆ¶çª—å£å¯ä»¥æŠŠä¿¡æ¯æ”¾åˆ°ç‰‡æ®µæ ‡è¯†ç¬¦ä¸­ï¼Œå­çª—å£ç›‘å¬ç‰‡æ®µæ ‡è¯†ç¬¦çš„å˜åŒ–ä»è€Œæ‹¿åˆ°æ•°æ®<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">çˆ¶çª—å£:</span><br><span class="line">  <span class="keyword">var</span> src = URL + <span class="string">'#'</span> + data;</span><br><span class="line">  <span class="built_in">document</span>.getElementById(<span class="string">'myIFrame'</span>).src = src;</span><br><span class="line">å­çª—å£:</span><br><span class="line">  <span class="built_in">window</span>.onhashchange = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> message = <span class="built_in">window</span>.location.hash;</span><br><span class="line">    Â·Â·Â·</span><br><span class="line">  &#125;;</span><br></pre></td></tr></table></figure></p>
<h1 id="postMessage"><a href="#postMessage" class="headerlink" title="postMessage"></a>postMessage</h1><p>HTML5ä¸ºäº†è§£å†³è·¨çª—å£é€šä¿¡çš„é—®é¢˜ï¼Œå¼•å…¥äº†ä¸€ä¸ªå…¨æ–°çš„APIï¼šè·¨æ–‡æ¡£é€šä¿¡ APIï¼ˆCross-document messaging) è¿™ä¸ªAPIå…è®¸è·¨çª—å£é€šä¿¡ï¼Œæ— è®ºæ˜¯å¦åŒæº,ä¸‹é¢æˆ‘ä»¬æ¥çœ‹ä¸‹è¿™ä¸ªapiæ€ä¹ˆç”¨<br>çˆ¶çª—å£å‘é€æ¶ˆæ¯ï¼Œå­çª—å£æ¥æ”¶æ¶ˆæ¯<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">çˆ¶çª—å£</span><br><span class="line">  <span class="keyword">let</span> child = <span class="built_in">window</span>.open(<span class="string">'http://127.0.0.1:5500/prop/child.html'</span>);</span><br><span class="line">  setInterval(<span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">    child.postMessage(<span class="string">'hello my son'</span>, <span class="string">'http://127.0.0.1:5500/prop/child.html'</span>);</span><br><span class="line">  &#125;,<span class="number">1000</span>);</span><br><span class="line">å­çª—å£</span><br><span class="line">  <span class="built_in">window</span>.addEventListener(<span class="string">'message'</span>,<span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(e.source); <span class="comment">// å‘é€æ¶ˆæ¯çš„çª—å£</span></span><br><span class="line">    <span class="built_in">console</span>.log(e.origin);  <span class="comment">// æ¶ˆæ¯å‘é€çš„åœ°å€</span></span><br><span class="line">    <span class="built_in">console</span>.log(e.data); <span class="comment">// å‘é€è¿‡æ¥çš„æ¶ˆæ¯</span></span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure></p>
<p>æˆ–è€…æ˜¯å­çª—å£å‘é€æ¶ˆæ¯ï¼Œçˆ¶çª—å£æ¥æ”¶æ¶ˆæ¯<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">çˆ¶çª—å£</span><br><span class="line">  <span class="keyword">let</span> child = <span class="built_in">window</span>.open(<span class="string">'http://127.0.0.1:5500/prop/child.html'</span>);</span><br><span class="line">  <span class="built_in">window</span>.addEventListener(<span class="string">'message'</span>, e=&gt;&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(e.data);</span><br><span class="line">  &#125;);</span><br><span class="line">å­çª—å£</span><br><span class="line">   setInterval(<span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">    <span class="built_in">window</span>.opener.postMessage(<span class="string">'hello, my father'</span>, <span class="string">'http://127.0.0.1:5500/Prop/parent.html'</span>);</span><br><span class="line">  &#125;,<span class="number">1000</span>);</span><br></pre></td></tr></table></figure></p>
<h1 id="window-name"><a href="#window-name" class="headerlink" title="window.name"></a>window.name</h1><blockquote>
<p>æµè§ˆå™¨çª—å£æœ‰window.nameå±æ€§ã€‚è¿™ä¸ªå±æ€§çš„æœ€å¤§ç‰¹ç‚¹æ˜¯ï¼Œæ— è®ºæ˜¯å¦åŒæºï¼Œåªè¦åœ¨åŒä¸€ä¸ªçª—å£é‡Œï¼Œå‰ä¸€ä¸ªç½‘é¡µè®¾ç½®äº†è¿™ä¸ªå±æ€§ï¼Œåä¸€ä¸ªç½‘é¡µå¯ä»¥è¯»å–å®ƒã€‚</p>
</blockquote>
<p>æˆ‘ä»¬å¯ä»¥åœ¨å½“å‰é¡µé¢ä¸­è®¾ç½®<code>window.name = data;</code>ï¼Œç„¶åé€šè¿‡ç‚¹å‡»aæ ‡ç­¾(é»˜è®¤åœ¨åŒä¸€tabé¡µä¸‹è·³è½¬)ï¼Œæˆ–è€…ä¿®æ”¹é¡µé¢çš„locationä½¿ä¹‹åœ¨åŒä¸€tabé¡µä¸‹ä¿®æ”¹åœ°å€ï¼Œè¿™ç§æƒ…å†µä¸‹å¯ä»¥å…±äº«<code>window.name</code>å±æ€§<br>ä¸¾ä¸ªæ —å­<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.name = <span class="string">"éŸ“ä»è¼"</span>;</span><br><span class="line">setTimeout(<span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">  <span class="built_in">window</span>.location.href = <span class="string">'http://www.baidu.com'</span>;</span><br><span class="line">&#125;,<span class="number">1000</span>);</span><br></pre></td></tr></table></figure></p>
<p>æˆ‘ä»¬å…ˆè®¾ç½®å¥½é¡µé¢çš„nameï¼Œç„¶åæ”¾ä¸€ä¸ªå»¶æ—¶è°ƒç”¨ï¼Œ1sä»¥åé¡µé¢è·³è½¬åˆ°<code>ç™¾åº¦</code>ï¼Œæˆ‘ä»¬åœ¨<code>ç™¾åº¦</code>çš„æ§åˆ¶å°ä¸‹æ‰“å°nameå‘ç°æ­£æ˜¯æˆ‘ä»¬æå‰è®¾ç½®å¥½çš„<br><figure class="image-box">
                <a rel=è·¨åŸŸè§£å†³æ–¹æ¡ˆ href="1.png" class="swipebox" title="undefined"><img src="1.png" alt="" title="" class=""></a>
                <p></p>
            </figure></p>
<h1 id="JSONPè·¨åŸŸ"><a href="#JSONPè·¨åŸŸ" class="headerlink" title="JSONPè·¨åŸŸ"></a>JSONPè·¨åŸŸ</h1><h2 id="åŸç†"><a href="#åŸç†" class="headerlink" title="åŸç†"></a>åŸç†</h2><p>ä¸çŸ¥å¤§å®¶æœ‰æ²¡æœ‰å‘ç°ï¼Œhtmlé™æ€æ ‡ç­¾çš„<code>src</code>æˆ–è€…<code>href</code>è¯·æ±‚çš„å†…å®¹æ˜¯ä¸å—åŒæºç­–ç•¥çš„é™åˆ¶çš„ï¼Œè¿™å°±æ˜¯<code>JSONP</code>çš„ç²¾é«“æ‰€åœ¨<br>ä¸¾ä¸ªæ —å­<br>æˆ‘ä»¬æ–°å»ºä¸€ä¸ªhtmlæ–‡ä»¶ï¼Œç„¶åæ·»åŠ ä»¥ä¸‹ä»£ç <br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"http://localhost:1688"</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>æˆ‘ä»¬æŠŠnodeæœåŠ¡å™¨å¯åŠ¨èµ·æ¥ï¼Œç›‘å¬1688ç«¯å£,ç›‘å¬è·¯ç”±æ·»åŠ ä»¥ä¸‹ä»£ç <br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">router.get(<span class="string">'/'</span>, (req, res)=&gt;&#123;</span><br><span class="line">  res.end(<span class="string">'body&#123;background: red&#125;'</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<p>ç„¶åæˆ‘ä»¬æ‰“å¼€htmlæ–‡ä»¶ï¼Œå±•ç°åœ¨é¢å‰çš„æ˜¯ä¸€ä¸ªèƒŒæ™¯ä¸ºçº¢è‰²çš„ç©ºé¡µé¢<br>æˆ‘ä»¬å†æ‹¿scriptåšä¸ªå®éªŒ<br>æ–°å»ºhtmlæ–‡ä»¶ï¼Œç„¶åæ·»åŠ å·²ä¸‹ä»£ç <br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">callback</span>(<span class="params">data</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(data);</span><br><span class="line">  &#125; </span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br><span class="line"><span class="regexp">&lt;script src="http:/</span><span class="regexp">/localhost:1688"&gt;&lt;/</span>script&gt;</span><br></pre></td></tr></table></figure></p>
<p>ä¿®æ”¹nodeè·¯ç”±<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">router.get(&apos;/&apos;, (req, res)=&gt;&#123;</span><br><span class="line">  res.end(&apos;callback(&#123;name: &quot;éŸ“ä»è¼&quot;, age: 21&#125;)&apos;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<p>æ‰“å¼€htmlæ–‡ä»¶<br><figure class="image-box">
                <a rel=è·¨åŸŸè§£å†³æ–¹æ¡ˆ href="2.png" class="swipebox" title="undefined"><img src="2.png" alt="" title="" class=""></a>
                <p></p>
            </figure><br>è¿™å°±æ˜¯JSONPçš„æ ¸å¿ƒæ€æƒ³ï¼Œå°†å‡½æ•°åœ¨å‰ç«¯æå‰å®šä¹‰å¥½ï¼Œç„¶ååˆ©ç”¨scriptæ ‡ç­¾ä»åå°è¿”å›è°ƒç”¨è¯­å¥</p>
<h2 id="æ‰‹æ’¸ä¸€ä¸ªJSONP"><a href="#æ‰‹æ’¸ä¸€ä¸ªJSONP" class="headerlink" title="æ‰‹æ’¸ä¸€ä¸ªJSONP"></a>æ‰‹æ’¸ä¸€ä¸ªJSONP</h2><p>æ˜ç™½åŸç†ä»¥åæˆ‘ä»¬æ¥å†™ä¸€ä¸ªï¼Œå¤§ä½“æ€æƒ³å°±æ˜¯å°è£…ä¸€ä¸ªjsonpå‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°åŠ¨æ€çš„åˆ›å»ºä¸€ä¸ªscriptæ ‡ç­¾å¹¶appendToåˆ°bodyé‡Œå»ï¼Œæ ‡ç­¾çš„srcç”±å¤–ç•Œä¼ å…¥<br>å‰ç«¯ä»£ç <br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">jsonp</span>(<span class="params">option</span>)</span>&#123;</span><br><span class="line">  <span class="comment">// åŠ¨æ€åˆ›å»ºä¸€ä¸ªscriptæ ‡ç­¾</span></span><br><span class="line">   <span class="keyword">let</span> scrip = <span class="built_in">document</span>.createElement(<span class="string">'script'</span>);</span><br><span class="line">   <span class="comment">// callbackName è¿™ç§æ–¹å¼æ˜¯é˜²æ­¢æµè§ˆå™¨cache</span></span><br><span class="line">   <span class="keyword">let</span> callbackName = <span class="string">`myfunc_<span class="subst">$&#123;<span class="built_in">Math</span>.random().toString().substr(<span class="number">2</span>)&#125;</span>`</span></span><br><span class="line">   <span class="comment">// å°†scriptçš„srcæŒ‡å‘å¤–ç•Œä¼ è¿›æ¥çš„url</span></span><br><span class="line">   scrip.src = <span class="string">`<span class="subst">$&#123;option.url&#125;</span>?callback=<span class="subst">$&#123;callbackName&#125;</span>`</span>;</span><br><span class="line">   <span class="comment">// å°†æ–°å»ºçš„script æ·»åŠ åˆ°bodyä¸­ï¼Œæ·»åŠ å®Œæˆå°±ä¼šè‡ªåŠ¨å‘æœåŠ¡å™¨å‘èµ·è¯·æ±‚ï¼ŒæœåŠ¡å™¨è¿”å›å‡½æ•°æ‰§è¡Œè¯­å¥ï¼Œ</span></span><br><span class="line">   <span class="built_in">document</span>.body.appendChild(scrip);</span><br><span class="line">   <span class="comment">// è¿™æ˜¯æ˜¯ä¸Šè¾¹æˆ‘ä»¬æ‰€è¯´çš„æå‰å®šä¹‰çš„å‡½æ•°</span></span><br><span class="line">   <span class="built_in">window</span>[callbackName] = <span class="function"><span class="keyword">function</span>(<span class="params">data</span>)</span>&#123;</span><br><span class="line">     option.success(data);</span><br><span class="line">     <span class="comment">// æ‰§è¡Œå®Œä»¥åå°±æŠŠå¤šä½™çš„scriptæ ‡ç­¾å»é™¤</span></span><br><span class="line">     <span class="built_in">document</span>.body.removeChild(scrip);</span><br><span class="line">   &#125;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> jsonp(&#123;</span><br><span class="line">   url: <span class="string">'http://localhost:1688'</span>,</span><br><span class="line">   success: <span class="function"><span class="keyword">function</span>(<span class="params">data</span>)</span>&#123;</span><br><span class="line">     <span class="built_in">console</span>.log(data);</span><br><span class="line">   &#125;</span><br><span class="line"> &#125;);</span><br></pre></td></tr></table></figure></p>
<p>åç«¯ä»£ç <br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">router.get(<span class="string">'/'</span>, (req, res)=&gt;&#123;</span><br><span class="line">  <span class="comment">// å°†è¦ä¼ ç»™å‰ç«¯çš„æ•°æ®åŒ…è£…æˆjsonå­—ç¬¦ä¸²</span></span><br><span class="line">  <span class="keyword">let</span> data = <span class="built_in">JSON</span>.stringify(&#123;</span><br><span class="line">    name: <span class="string">'éŸ“ä»è¼'</span>,</span><br><span class="line">    age: <span class="number">21</span></span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="comment">// å°†å‡½æ•°æ‰§è¡Œè¯­å¥è¿”å›ç»™å‰ç«¯</span></span><br><span class="line">  res.end(<span class="string">`<span class="subst">$&#123;req.query.callback&#125;</span>(<span class="subst">$&#123;data&#125;</span>)`</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<h1 id="CORS-è·¨åŸŸ"><a href="#CORS-è·¨åŸŸ" class="headerlink" title="CORS è·¨åŸŸ"></a>CORS è·¨åŸŸ</h1><blockquote>
<p>CORSæ˜¯ä¸€ä¸ªW3Cæ ‡å‡†ï¼Œå…¨ç§°æ˜¯â€è·¨åŸŸèµ„æºå…±äº«â€ï¼ˆCross-origin resource sharingï¼‰ã€‚å®ƒå…è®¸æµè§ˆå™¨å‘è·¨æºæœåŠ¡å™¨ï¼Œå‘å‡ºXMLHttpRequestè¯·æ±‚ï¼Œä»è€Œå…‹æœäº†AJAXåªèƒ½åŒæºä½¿ç”¨çš„é™åˆ¶ã€‚CORSéœ€è¦æµè§ˆå™¨å’ŒæœåŠ¡å™¨åŒæ—¶æ”¯æŒã€‚ç›®å‰ï¼Œæ‰€æœ‰æµè§ˆå™¨éƒ½æ”¯æŒè¯¥åŠŸèƒ½ï¼ŒIEæµè§ˆå™¨ä¸èƒ½ä½äºIE10ã€‚æ•´ä¸ªCORSé€šä¿¡è¿‡ç¨‹ï¼Œéƒ½æ˜¯æµè§ˆå™¨è‡ªåŠ¨å®Œæˆï¼Œä¸éœ€è¦ç”¨æˆ·å‚ä¸ã€‚å¯¹äºå¼€å‘è€…æ¥è¯´ï¼ŒCORSé€šä¿¡ä¸åŒæºçš„AJAXé€šä¿¡æ²¡æœ‰å·®åˆ«ï¼Œä»£ç å®Œå…¨ä¸€æ ·ã€‚æµè§ˆå™¨ä¸€æ—¦å‘ç°AJAXè¯·æ±‚è·¨æºï¼Œå°±ä¼šè‡ªåŠ¨æ·»åŠ ä¸€äº›é™„åŠ çš„å¤´ä¿¡æ¯ï¼Œæœ‰æ—¶è¿˜ä¼šå¤šå‡ºä¸€æ¬¡é™„åŠ çš„è¯·æ±‚ï¼Œä½†ç”¨æˆ·ä¸ä¼šæœ‰æ„Ÿè§‰ã€‚å› æ­¤ï¼Œå®ç°CORSé€šä¿¡çš„å…³é”®æ˜¯æœåŠ¡å™¨ã€‚åªè¦æœåŠ¡å™¨å®ç°äº†CORSæ¥å£ï¼Œå°±å¯ä»¥è·¨æºé€šä¿¡ã€‚</p>
</blockquote>
<p>æˆ‘ä»¬éœ€è¦åœ¨æœåŠ¡å™¨ç«¯åšå¦‚ä¸‹é…ç½®ï¼Œå°±å¯ä»¥å®ç°corsè·¨åŸŸ<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">app.all(<span class="string">"*"</span>, <span class="function"><span class="keyword">function</span>(<span class="params">req, res, next</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// ä¸Šè¾¹è¯´äº†ï¼Œæµè§ˆå™¨ä¸€æ—¦æ£€æµ‹åˆ°ajaxè¯·æ±‚è·¨åŸŸï¼Œå°±ä¼šé™„åŠ ä¸€äº›å¤´ä¿¡æ¯ï¼Œå…¶ä¸­æœ€é‡è¦çš„å°±æ˜¯ORiginè¿™ä¸ªå­—æ®µï¼Œ</span></span><br><span class="line">  <span class="comment">// è¿™å¥ä»£ç æ£€æµ‹è¯·æ±‚ä¸­æ˜¯å¦å¸¦æœ‰è¯¥å­—æ®µï¼Œå¦‚æœæ²¡æœ‰åˆ™ä¸æ˜¯è·¨åŸŸè¯·æ±‚ï¼Œç›´æ¥è·³è¿‡ï¼Œä¸å½’å’±ç®¡</span></span><br><span class="line">  <span class="keyword">if</span> (!req.get(<span class="string">"Origin"</span>)) <span class="keyword">return</span> next();</span><br><span class="line">  </span><br><span class="line">  <span class="comment">//è¿™ä¸ªå¤´éƒ¨å­—æ®µè¡¨ç¤ºè¯¥æœåŠ¡å™¨æ¥æ”¶å“ªäº›åŸŸçš„è·¨åŸŸè¯·æ±‚ï¼Œå¯ä¸ºæ˜Ÿå·(*)è¡¨ç¤ºä»»æ„è¯·æ±‚ï¼Œæˆ–è€…å…·ä½“æŸä¸ªåŸŸåï¼Œè¡¨ç¤ºåªæ¥å—è¯¥åŸŸåçš„è¯·æ±‚</span></span><br><span class="line">  res.set(<span class="string">"Access-Control-Allow-Origin"</span>,<span class="string">"http://127.0.0.1:5500"</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// è®¾ç½®å…è®¸çš„è¯·æ±‚ç±»å‹</span></span><br><span class="line">  res.set(<span class="string">"Access-Control-Allow-Methods"</span>, <span class="string">"GET,POST,PUT"</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å¦‚æœæƒ³è¦å…è®¸å‰ç«¯å‘é€cookieï¼Œåˆ™è¦è®¾ç½®æ­¤å­—æ®µï¼ŒåŒæ—¶å‰å°å‘èµ·ajaxè¯·æ±‚çš„æ—¶å€™åšå¦‚ä¸‹è®¾ç½®</span></span><br><span class="line">  <span class="comment">// var xhr = new XMLHttpRequest();</span></span><br><span class="line">  <span class="comment">// xhr.withCredentials = true;</span></span><br><span class="line">  <span class="comment">// æ³¨æ„ï¼šå¦‚æœè¦æƒ³å‰ç«¯æºå¸¦cookieé‚£ä¹ˆaccess-control-allow-originå°±åªèƒ½è®¾ç½®ç‰¹å®šçš„åŸŸ</span></span><br><span class="line">  res.set(<span class="string">"Access-Control-Allow-Credentials"</span>, <span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (<span class="string">"OPTIONS"</span> === req.method) <span class="keyword">return</span> res.sendStatus(<span class="number">200</span>);</span><br><span class="line">  next();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<p>å…³äºCROSçš„è¯¦ç»†çŸ¥è¯†ï¼Œå¯å‚è€ƒ<a href="http://www.ruanyifeng.com/blog/2016/04/cors.html" target="_blank" rel="noopener">é˜®ä¸€å³°å¤§ä½¬çš„è¿™ç¯‡æ—¥å¿—</a></p>
<h1 id="webpack-ä»£ç†è·¨åŸŸ"><a href="#webpack-ä»£ç†è·¨åŸŸ" class="headerlink" title="webpack ä»£ç†è·¨åŸŸ"></a>webpack ä»£ç†è·¨åŸŸ</h1><p>é€šè¿‡è®¾ç½®webpack devServerçš„poxyå±æ€§ï¼Œè®©å…¶ä»£ç†è·¨åŸŸ<br>å…·ä½“è®¾ç½®å¦‚ä¸‹<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  entry: ...,</span><br><span class="line">  output: ...,</span><br><span class="line">  <span class="built_in">module</span>: ...,</span><br><span class="line">  devServer: &#123;</span><br><span class="line">    proxy: &#123;</span><br><span class="line">      <span class="string">'/api'</span>: &#123;  <span class="comment">//ä½¿ç”¨"/api"æ¥ä»£æ›¿çº¿ä¸ŠæœåŠ¡å™¨åœ°å€</span></span><br><span class="line">        target: <span class="string">'http://mobile.yangkeduo.com'</span>, <span class="comment">//æºåœ°å€</span></span><br><span class="line">        changeOrigin: <span class="literal">true</span>, <span class="comment">//æ”¹å˜æº</span></span><br><span class="line">        pathRewrite: &#123;</span><br><span class="line">          <span class="string">'^/api'</span>: <span class="string">''</span> <span class="comment">//è·¯å¾„é‡å†™</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="åŸç†-1"><a href="#åŸç†-1" class="headerlink" title="åŸç†"></a>åŸç†</h2><p>åŒæºç­–ç•¥é’ˆå¯¹çš„æ˜¯å‰ç«¯ï¼Œå¯¹æœåŠ¡å™¨å¹¶æ— è¦æ±‚ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥è®©å‰ç«¯å¯¹åŒæºçš„æœåŠ¡å™¨å‘é€ä¸€ä¸ªè¯·æ±‚ï¼Œç„¶ååŒæºæœåŠ¡å™¨ä½œä¸ºä»£ç†å»å‘ç›®æ ‡æœåŠ¡å™¨è¯·æ±‚æ•°æ®ï¼Œç„¶åæŠŠæ•°æ®ç»™æˆ‘ä»¬, è¿™å°±æ˜¯<code>devServer</code>çš„åŸç†ï¼Œå†…éƒ¨ç”¨çš„æ˜¯<code>http-proxy-middleware</code>ä¸­é—´ä»¶</p>

        </div>
        
<blockquote class="post-copyright">
    <div class="content">
        
<span class="post-time">
    æœ€åæ›´æ–°æ—¶é—´ï¼š<time datetime="2019-02-09T05:22:56.523Z" itemprop="dateUpdated">2019-02-09 13:22:56</time>
</span><br>


        
        è½¬è½½æ³¨æ˜å‡ºå¤„ï¼ŒåŸæ–‡åœ°å€ï¼š<a href="/blog/2019/02/08/è·¨åŸŸè§£å†³æ–¹æ¡ˆ/" target="_blank" rel="external">https://hanrenhui.coding.me/blog/2019/02/08/è·¨åŸŸè§£å†³æ–¹æ¡ˆ/</a>
        
    </div>
    <footer>
        <a href="https://hanrenhui.coding.me/blog">
            <img src="/blog/img/avatar.jpg" alt="éŸ“ä»è¼">
            éŸ“ä»è¼
        </a>
    </footer>
</blockquote>

        
        <div class="post-footer">
            
	<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/ç¬”è®°/">ç¬”è®°</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/è·¨åŸŸ/">è·¨åŸŸ</a></li></ul>

            <div class="page-share-wrap">
    

<div class="page-share" id="pageShare">
    <ul class="reset share-icons">
      
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="å¾®ä¿¡">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=https://hanrenhui.coding.me/blog/2019/02/08/è·¨åŸŸè§£å†³æ–¹æ¡ˆ/&title=ã€Šè·¨åŸŸè§£å†³æ–¹æ¡ˆã€‹ â€” This is My World&source=" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=ã€Šè·¨åŸŸè§£å†³æ–¹æ¡ˆã€‹ â€” This is My World&url=https://hanrenhui.coding.me/blog/2019/02/08/è·¨åŸŸè§£å†³æ–¹æ¡ˆ/&via=https://hanrenhui.coding.me/blog" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=https://hanrenhui.coding.me/blog/2019/02/08/è·¨åŸŸè§£å†³æ–¹æ¡ˆ/" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
      
    </ul>
 </div>



    <a href="javascript:;" id="shareFab" class="page-share-fab waves-effect waves-circle">
        <i class="icon icon-share-alt icon-lg"></i>
    </a>
</div>

        </div>
        
    </div>
    
<nav class="post-nav flex-row flex-justify-between flex-row-reverse">
  

  
    <div class="next">
      <a href="/blog/2018/12/01/jsè¿è¡Œæœºåˆ¶/" id="post-next" class="post-nav-link">
        <div class="tips">Next <i class="icon icon-angle-right icon-lg icon-pl"></i></div>
        <h4 class="title">ä»EventLoopè°ˆjsè¿è¡Œæœºåˆ¶</h4>
      </a>
    </div>
  
</nav>


    
        <div id="repo">
    <div class="loading active"></div>
    <div class="top clearfix">
        <div class="avatar pull-left"></div>
        <div class="content pull-left">
            <p class="name"></p>
            <p class="description"></p>
        </div>
    </div>
    <ul class="bottom">
        <li class="star">
            <span class="icon icon-star"></span>
            <span class="val">0</span>
        </li>
        <li class="fork">
            <span class="icon icon-code-fork"></span>
            <span class="val">0</span>
        </li>
        <li class="date">
            <span class="icon icon-clock-o"></span>
            <span class="val">0000-00-00</span>
        </li>
    </ul>
    <a class="link" href=""></a>
</div>
    
    
        <aside class="post-widget">
            <nav class="post-toc-wrap" id="post-toc">
                <strong>ç›®å½•</strong>
                <ol class="post-toc"><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#å‰è¨€"><span class="post-toc-number">1.</span> <span class="post-toc-text">å‰è¨€</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#åŒæºç­–ç•¥"><span class="post-toc-number">2.</span> <span class="post-toc-text">åŒæºç­–ç•¥</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#è·¨åŸŸé™åˆ¶"><span class="post-toc-number">3.</span> <span class="post-toc-text">è·¨åŸŸé™åˆ¶</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#document-domain"><span class="post-toc-number">4.</span> <span class="post-toc-text">document.domain</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#ç‰‡æ®µæ ‡è¯†ç¬¦"><span class="post-toc-number">5.</span> <span class="post-toc-text">ç‰‡æ®µæ ‡è¯†ç¬¦</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#postMessage"><span class="post-toc-number">6.</span> <span class="post-toc-text">postMessage</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#window-name"><span class="post-toc-number">7.</span> <span class="post-toc-text">window.name</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#JSONPè·¨åŸŸ"><span class="post-toc-number">8.</span> <span class="post-toc-text">JSONPè·¨åŸŸ</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#åŸç†"><span class="post-toc-number">8.1.</span> <span class="post-toc-text">åŸç†</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#æ‰‹æ’¸ä¸€ä¸ªJSONP"><span class="post-toc-number">8.2.</span> <span class="post-toc-text">æ‰‹æ’¸ä¸€ä¸ªJSONP</span></a></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#CORS-è·¨åŸŸ"><span class="post-toc-number">9.</span> <span class="post-toc-text">CORS è·¨åŸŸ</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#webpack-ä»£ç†è·¨åŸŸ"><span class="post-toc-number">10.</span> <span class="post-toc-text">webpack ä»£ç†è·¨åŸŸ</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#åŸç†-1"><span class="post-toc-number">10.1.</span> <span class="post-toc-text">åŸç†</span></a></li></ol></li></ol>
            </nav>
            <div class="toc-bar"><div>
        </aside>
    
</article>

</div>

        <footer class="footer">
    
    <div class="top">
        
            <p>
    <span>Linksï¼š</span>
    
    <span class="blogroll-item">
        <a href="" target="_blank">HOME</a>
    </span>
    
</p>

        
    </div>
    
    <div class="bottom">
        <p>
            <span>
                éŸ“ä»è¼ &copy; 2017 - 2019
            </span>
        		
           	
            
            
            <span>
	            Power by <a href="http://hexo.io/" target="_blank">Hexo</a> Theme <a href="https://github.com/codefine/hexo-theme-mellow" target="_blank">mellow</a>
            </span>
            
            
            

            
                
<span class="site-uv" title="æ€»è®¿å®¢é‡">
    <i class="icon icon-user"></i>
    <i class="busuanzi-value" id="busuanzi_value_site_uv"></i>
</span>


<span class="site-pv" title="æ€»è®¿é—®é‡">
    <i class="icon icon-eye"></i>
    <i class="busuanzi-value" id="busuanzi_value_site_pv"></i>
</span>

            
        </p>
    </div>
</footer>

    </main>
    <div class="mask" id="mask"></div>
<a href="javascript:;" id="gotop" class="waves-effect waves-circle waves-light"><span class="icon icon-lg icon-chevron-up"></span></a>



<div class="global-share" id="globalShare">
    <ul class="reset share-icons">
      
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="å¾®ä¿¡">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=https://hanrenhui.coding.me/blog/2019/02/08/è·¨åŸŸè§£å†³æ–¹æ¡ˆ/&title=ã€Šè·¨åŸŸè§£å†³æ–¹æ¡ˆã€‹ â€” This is My World&source=" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=ã€Šè·¨åŸŸè§£å†³æ–¹æ¡ˆã€‹ â€” This is My World&url=https://hanrenhui.coding.me/blog/2019/02/08/è·¨åŸŸè§£å†³æ–¹æ¡ˆ/&via=https://hanrenhui.coding.me/blog" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=https://hanrenhui.coding.me/blog/2019/02/08/è·¨åŸŸè§£å†³æ–¹æ¡ˆ/" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
      
    </ul>
 </div>


<div class="page-modal wx-share" id="wxShare">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <p>æ‰«ä¸€æ‰«ï¼Œåˆ†äº«åˆ°å¾®ä¿¡</p>
    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAN4AAADeCAAAAAB3DOFrAAACvklEQVR42u3aQW4DIRAEQP//04mUUyLLm+4B1j7UniJHiykODG7m8Yifr5/n1ee///v8yfVb7ciPEw8eHh7eaOqvnuehE8CuZUoW8Z/FwsPDwzvGu55KvtFfb/3JdyUlpBgHDw8P76286407P/gmZSYvVHh4eHifzEsw+YTySCJfRDw8PLw7eclGHP34v/yy609mgci2rAUPDw9vMp/iEPzevw/e7+Hh4eEt3KqvXIzdM8I/4+Ph4eEd4M1aAdqLrjySaJsGooKBh4eHt5WXRKj5D/6VsOD6GiwvG3/ewsPDw7udl7dVzRoC8rBjODIeHh7eAd6suSq5HsvbBZLikReMusMLDw8Pr+S12/osRMiP7G1DVRTg4uHh4W3lrUS0+TF3V96cFI9hDcTDw8MreXksm39N2zJV3NeVo+Hh4eGd5rUH3PV328N0ffjGw8PD28qbNVrlYUR+9ZVfayVNA3h4eHjneElo28LaLX5XMcDDw8O7k1dnvaO2g7YJoA1tiwswPDw8vAVe3kTVXnG1zVVFLJvHGXh4eHgHeOvRw67r/3qKKyUNDw8Pb4HXRqj55X0bXrRRb9LWgIeHh3eCl7zcbs2zo3AUwsZR7yNfGzw8PLySl4cL+aKsF5JtS4+Hh4d3C2/XVNrjdRthRBdveHh4eAd47U/9lSg2LzBt+LsURuDh4eGNeG10u7RNj0LblcACDw8P7wRvV+tVPsKsHSEvRUc6y/Dw8PCeeHlkkGzK7STyI3hd2PDw8PC28r7KJ782a++h1ssGHh4e3j28WUNVWzB2NXJtJuHh4eEt8GbFYKVBalcDQbTEeHh4eMd4e4vBLAieFRI8PDy8z+edbj5o2wuuZ46Hh4f3Xl7bINVOMS9FdRiBh4eHd4CXD7HSmJUs36ztAA8PD+9O3t4LsOT6P1+yldKCh4eHd4D3Db3zSt8YBp2tAAAAAElFTkSuQmCC" alt="å¾®ä¿¡åˆ†äº«äºŒç»´ç ">
</div>


    
    <!-- main-js -->
<script type="text/javascript" src="//cdn.bootcss.com/jquery/2.1.0/jquery.min.js"></script>
<script type="text/javascript" src="/blog/js/plugins/fastclick.js?v=1.3.2"></script>
<script type="text/javascript" src="/blog/js/plugins/ios-orientationchange-fix.js?v=1.3.2"></script>
<script type="text/javascript" src="/blog/js/plugins/jquery.swipebox.min.js?v=1.3.2"></script>

<script type="text/javascript" src="https://cdn.bootcss.com/node-waves/0.7.4/waves.min.js"></script>

<script type="text/javascript" src="/blog/js/method.js?v=1.3.2"></script>
<script type="text/javascript" src="/blog/js/blog.js?v=1.3.2"></script>

<!-- third-party -->
<script type="text/javascript">
;( function( $ ) {

	$( '.swipebox' ).swipebox({
		hideCloseButtonOnMobile: true
	});

} )( jQuery );
</script>


    <script type="text/javascript">
    (function() {

        const origin = "Han RenHui | hexo-theme-mellow"
        let user, repo;
        origin.replace(/(\S+)\s{0,1}\|\s{0,1}(\S+)/g, (...rest) => {
            [user, repo] = [ rest[1], rest[2] ];
        });
        if (user && repo) {
            const url = `//api.github.com/repos/${user}/${repo}?callback=?`;
            $.getJSON(url, (data) => {
                updateRepoInPage(data.data);
            });
        }

        function updateRepoInPage(data) {
            const {name, description, html_url: url, stargazers_count: stars, forks, owner: owner, updated_at: update} = data;
            _loadAvatar(owner.avatar_url).then(avatarUrl => {
                const avatarBg = `url(${avatarUrl})`;
                const container = $('#repo');
                container.click(() => {
                    window.open(url);
                });

                //init
                const loadingItem = container.find('.loading').hide();
                const topItem = container.find('.top').addClass('active');
                const bottomItem = container.find('.bottom').addClass('active');

                //avatar
                const avatarItem = container.find('.avatar');
                const oldBg = avatarItem.css('background-image');
                avatarItem.hover(() => {
                    avatarItem.css('background-image', avatarBg);
                }, () => {
                    avatarItem.css('background-image', oldBg);
                });

                //repo-name
                const nameItem = container.find('.name').html(name);

                //description
                const descriptionItem = container.find('.description').html(description);

                //stars
                const starItem = container.find('.star>.val').html(stars);

                //forks
                const forkItem = container.find('.fork>.val').html(forks);

                //date
                const formatDate = update.replace(/T.+/g, '');
                const dateItem = container.find('.date>.val').html(formatDate);
            });

            function _loadAvatar(url) {
                return new Promise((resolve, reject) => {
                    const img = new Image();
                    img.onload = () => {
                        resolve(url);
                    };
                    img.src = url;
                });
            }

        }

    })();
</script>





<script type="text/javascript" src="/blog/js/plugins/local_search.js?v=1.3.2"></script>
<script type="text/javascript">
	var search_path = "search.xml";
	if (search_path.length === 0) {
		search_path = "search.xml";
	}
	var path = "/blog/" + search_path;
	searchFunc(path, "local-search-input", "local-search-result");
</script>



<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>



    
        <script type="text/javascript" src="https://cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
<script type="text/javascript" src="//unpkg.com/valine/dist/Valine.min.js"></script>
<script type="text/javascript" src="/blog/js/plugins/valine.js?v=1.3.2"></script>
    
    



<script type="text/javascript" src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.4.js"></script>
<script type="text/javascript" src="/blog/js/plugins/leancloud_visitors.js?v=1.3.2"></script>



    <!-- mathjax config similar to math.stackexchange -->
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
            processEscapes: true,
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

<script type="text/javascript" src="//cdn.bootcss.com/mathjax/2.7.1/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>






    <script type="text/javascript">
  daovoice('init', {
    app_id: "f7ac8962"
  });
  daovoice('update');
</script>

    
<script src="/blog/live2dw/lib/L2Dwidget.min.js?0c58a1486de42ac6cc1c59c7d98ae887"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"/blog/live2dw/assets/koharu.model.json"},"display":{"superSample":2,"width":150,"height":300,"position":"right","hOffset":0,"vOffset":-120},"mobile":{"show":true,"scale":1,"hHeadPos":0.5,"vHeadPos":0.618},"react":{"opacityDefault":0.8,"opacityOnHover":0.2},"log":false});</script></body>
</html>
